# Лабораторная работа №2: Камера и освещение

## Реализованные функции

### 1. Управление камерой
- **WASD** - перемещение вперед/назад/влево/вправо
- **Space** - подъем вверх
- **Left Shift** - опускание вниз
- **Правая кнопка мыши** - вращение камеры (look around)

Камера использует матрицу Look-At для расчета view-матрицы.

### 2. Освещение по модели Блинн-Фонга

Реализованы три типа источников света:

#### Направленный свет (Directional Light)
- Имитирует солнечный свет
- Параметры: направление, ambient, diffuse, specular
- Управление через UI панель "Lighting Controls"

#### Точечные источники света (Point Lights)
- До 4 источников одновременно
- Затухание по закону обратных квадратов: `1 / (constant + linear * distance + quadratic * distance²)`
- Параметры: позиция, цвета (ambient, diffuse, specular), коэффициенты затухания
- Хранятся в shader storage buffer (SSBO)

#### Прожекторы (Spot Lights)
- До 4 прожекторов одновременно
- Затухание по закону обратных квадратов
- Гладкие края через интерполяцию между внутренним и внешним углами
- Параметры: позиция, направление, углы (cutOff, outerCutOff), коэффициенты затухания
- Хранятся в shader storage buffer (SSBO)

### 3. Материалы объектов

Каждый объект имеет следующие свойства материала:
- **albedo_color** - диффузный цвет (базовый цвет объекта)
- **specular_color** - цвет отраженного блика
- **shininess** - параметр блеска (степень в формуле Блинн-Фонга)

### 4. Нормали вершин

Октаэдр создается с правильными нормалями для каждой грани, что обеспечивает корректное освещение.

### 5. UI элементы

Реализованы панели ImGui для управления:
- **Lighting Controls** - управление всеми источниками света
  - Направленный свет: направление, цвета
  - Точечные источники: количество, позиция, цвета, затухание
  - Прожекторы: количество, позиция, направление, углы, затухание
- **Camera** - информация о камере и скорость перемещения

## Технические детали

### Шейдеры

**Vertex Shader (shader.vert)**
- Трансформация вершин в мировые координаты
- Расчет нормальной матрицы для корректной трансформации нормалей
- Передача данных во фрагментный шейдер

**Fragment Shader (shader.frag)**
- Реализация модели освещения Блинн-Фонга
- Расчет освещения от всех типов источников
- Использование half-vector для расчета specular компонента
- Суммирование вкладов всех источников света

### Vulkan API

- Использование Uniform Buffers для данных сцены и моделей
- Использование Storage Buffers (SSBO) для массивов источников света
- Descriptor Sets для связывания буферов с шейдерами

## Запуск

```bash
cd /Users/masterkusok/code/computer-graphics/computer-graphics
./build-debug/testbed/testbed
```

**Важно:** Рабочая директория должна быть корнем проекта, чтобы шейдеры загружались корректно.

## Соответствие требованиям

✅ Работа в реальном времени  
✅ Управление камерой через клавиатуру и мышь  
✅ Shader storage буферы для точечных источников и прожекторов  
✅ UI элементы для управления параметрами освещения  
✅ Атрибут нормали у вершин  
✅ Модель Блинн-Фонга для всех источников света  
✅ Свойства материалов (albedo, specular, shininess)  
✅ Матрица Look-At для камеры  
✅ Рассеянное, направленное и прожекторное освещение  
✅ Затухание по закону обратных квадратов  
✅ Гладкие края у прожекторов  
